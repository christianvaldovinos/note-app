{"ast":null,"code":"var _jsxFileName = \"/Users/christianvaldovinos/Desktop/cs124-lab2/src/SharedUsers.js\",\n    _s = $RefreshSig$();\n\nimport './SharedUsers.css';\nimport { Fragment, useState } from \"react\";\nimport { query, where } from \"firebase/firestore\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SharedUsers(props) {\n  _s();\n\n  const [showInvalid, setShowInvalid] = useState(false);\n  let filteredEdit = props.canEdit.filter(e => e !== props.owner);\n  let filteredView = props.canView.filter(e => !props.canEdit.includes(e));\n  let userEmails = [];\n  const collectionRef = props.collectionRef;\n  const [validUsers, loadingTest, errorTest] = useCollectionData(query(collectionRef, where('key', '==', 'b97qjRbVqp7TaMiZFdTQ')));\n\n  if (!errorTest && !loadingTest) {\n    validUsers === null || validUsers === void 0 ? void 0 : validUsers.map(e => userEmails = e.emails);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: props.id === props.changeThis && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"nameMessage\",\n        children: [\" \", props.isOwner ? \"Share\" : \"Shared With\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 13\n      }, this), props.isOwner && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"shareWithUser\",\n          \"aria-label\": \"share with user\",\n          className: \"notebox\",\n          type: \"text\",\n          autoComplete: \"off\",\n          onKeyDown: e => {\n            if (e.key === 'Enter') {\n              if (userEmails.includes(document.getElementById(\"shareWithUser\").value)) {\n                props.onListShared(props.changeThis, document.getElementById('shareWithUser').value, document.getElementById('permission').value);\n                document.getElementById(\"shareWithUser\").value = \"\";\n                setShowInvalid(false);\n              } else {\n                setShowInvalid(true);\n              }\n            }\n\n            if (e.key === 'Escape') {\n              props.setShowRename(false);\n              props.setChangeThis(\"\");\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 17\n        }, this), showInvalid && /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"invalidUser\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Invalid user\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"permission\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Editor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Viewer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Owned by: \", props.owner]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"shareDiv\",\n        children: [filteredEdit.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: filteredView.length === 0 ? \"sharedBoxes2\" : \"sharedBoxes\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"shareTitles\",\n            children: \" Editors \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"shareList\",\n            children: filteredEdit.map(data => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"user\",\n              children: [props.isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n                \"aria-label\": \"remove user\",\n                id: \"removeButton\",\n                onClick: () => props.updateSharing(props.id, data, 'Editor'),\n                className: \"editPerm\",\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 21\n              }, this), data]\n            }, data, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 13\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 41\n        }, this), filteredView.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: filteredEdit.length === 0 ? \"sharedBoxes2\" : \"sharedBoxes\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"shareTitles\",\n            children: \" Viewers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"shareList\",\n            children: filteredView.map(data => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"user\",\n              children: [\" \", props.isOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"removeButton\",\n                onClick: () => props.updateSharing(props.id, data, 'Viewer'),\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 66\n              }, this), \" \", data]\n            }, data, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 13\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 45\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 14\n  }, this);\n}\n\n_s(SharedUsers, \"+borKohPOBVOxW+BrqGNNSRm3+I=\", false, function () {\n  return [useCollectionData];\n});\n\n_c = SharedUsers;\nexport default SharedUsers;\n\nvar _c;\n\n$RefreshReg$(_c, \"SharedUsers\");","map":{"version":3,"sources":["/Users/christianvaldovinos/Desktop/cs124-lab2/src/SharedUsers.js"],"names":["Fragment","useState","query","where","useCollectionData","SharedUsers","props","showInvalid","setShowInvalid","filteredEdit","canEdit","filter","e","owner","filteredView","canView","includes","userEmails","collectionRef","validUsers","loadingTest","errorTest","map","emails","id","changeThis","isOwner","key","document","getElementById","value","onListShared","setShowRename","setChangeThis","length","data","updateSharing"],"mappings":"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","sourcesContent":["import './SharedUsers.css'\nimport {Fragment, useState} from \"react\";\nimport {query, where} from \"firebase/firestore\";\nimport {useCollectionData} from \"react-firebase-hooks/firestore\";\n\nfunction SharedUsers(props){\n    const [showInvalid, setShowInvalid] = useState(false);\n    let filteredEdit = props.canEdit.filter((e) => (e !== props.owner));\n    let filteredView = props.canView.filter((e) => (!props.canEdit.includes(e)))\n    let userEmails = [];\n\n    const collectionRef = props.collectionRef;\n    const [validUsers, loadingTest, errorTest] = useCollectionData(query(collectionRef, where('key', '==', 'b97qjRbVqp7TaMiZFdTQ')));\n    if (!errorTest && !loadingTest) {\n        validUsers?.map((e) => userEmails = e.emails)\n    }\n\n    return ( <Fragment >\n        {(props.id === props.changeThis) && <div>\n            <div id={\"nameMessage\"}> {props.isOwner? \"Share\" : \"Shared With\"} </div>\n            {props.isOwner && <div>\n                <input id={\"shareWithUser\"}\n                aria-label={\"share with user\"}\n                className={\"notebox\"}\n                type={\"text\"}\n                autoComplete={\"off\"}\n                onKeyDown={(e) => {if (e.key === 'Enter') {\n                    if (userEmails.includes(document.getElementById(\"shareWithUser\").value)) {\n                        props.onListShared(props.changeThis,\n                            document.getElementById('shareWithUser').value,\n                            document.getElementById('permission').value);\n                        document.getElementById(\"shareWithUser\").value = \"\";\n                        setShowInvalid(false);\n                    } else{\n                        setShowInvalid(true);\n                    }\n                }if (e.key === 'Escape') {\n                    props.setShowRename(false);\n                    props.setChangeThis(\"\");\n                }}}/>\n                {showInvalid &&\n                    <div id={\"invalidUser\"}>\n                        <span>Invalid user</span>\n                    </div>\n                }\n                <select id={\"permission\"}>\n                    <option>Editor</option>\n                    <option>Viewer</option>\n                </select>\n            </div>\n            }\n            <div>Owned by: {props.owner}</div>\n            <div id={\"shareDiv\"}>\n        {((filteredEdit.length) > 0) && <div className={(filteredView.length) === 0 ? \"sharedBoxes2\" : \"sharedBoxes\"}>\n            <span className={\"shareTitles\"}> Editors </span>\n            <ul className={\"shareList\"}>\n        {filteredEdit.map((data) =>\n            <li className={\"user\"} key={data}>\n                {props.isOwner &&\n                    <button aria-label={\"remove user\"}\n                            id={\"removeButton\"}\n                            onClick={() => props.updateSharing(props.id, data, 'Editor')}\n                            className={\"editPerm\"}>\n                        X\n                    </button>\n                }\n                {data}\n            </li>,\n            )}\n            </ul>\n            </div>}\n        {((filteredView.length) > 0) && <div className={(filteredEdit.length) === 0 ? \"sharedBoxes2\" : \"sharedBoxes\"}>\n            <span className={\"shareTitles\"}> Viewers</span>\n            <ul className={\"shareList\"}>\n        {filteredView.map((data) =>\n            <li className={\"user\"} key={data}> {props.isOwner && <button id={\"removeButton\"} onClick={() => props.updateSharing(props.id, data, 'Viewer')}>X</button>} {data}</li>\n            )}\n            </ul>\n            </div>}\n            </div>\n        </div>}</Fragment>)\n}\n\n\nexport default SharedUsers;\n"]},"metadata":{},"sourceType":"module"}